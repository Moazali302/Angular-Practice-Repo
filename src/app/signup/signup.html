<main
  class="relative flex items-center justify-center bg-cover bg-center bg-no-repeat min-h-screen w-full px-4 sm:px-6 md:px-10 py-10"
  style="background-image: url('assets/signup.png.jpg');"
>
  <div class="absolute inset-0 bg-black/60 z-0"></div>

  <div
    class="relative z-10 w-full max-w-md sm:max-w-lg md:max-w-xl bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-6 sm:p-8 md:p-10 flex flex-col justify-center text-white 
    h-auto min-h-[80vh] sm:min-h-[85vh] md:min-h-[90vh] lg:min-h-[100vh] overflow-y-auto"
  >
    <h2
      class="text-3xl sm:text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300 mb-2"
    >
      Create Account
    </h2>
    <p class="text-center text-gray-300 mb-6 text-sm sm:text-base">
      Sign up to get started
    </p>

    <form [formGroup]="signupForm" (ngSubmit)="signup()" class="space-y-5">
      <!-- Full Name -->
      <div>
        <label class="block text-sm mb-1 text-gray-300">Full Name</label>
        <input
          type="text"
          formControlName="name"
          placeholder="Enter your name"
          class="w-full px-4 py-2.5 rounded-lg bg-gray-800/70 border border-blue-500/30 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <p
          *ngIf="signupForm.get('name')?.touched && signupForm.get('name')?.invalid"
          class="text-red-400 text-xs mt-1"
        >
          Full name is required.
        </p>
      </div>

      <!-- Email -->
      <div>
        <label class="block text-sm mb-1 text-gray-300">Email</label>
        <input
          type="email"
          formControlName="email"
          placeholder="example@email.com"
          class="w-full px-4 py-2.5 rounded-lg bg-gray-800/70 border border-blue-500/30 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <p
          *ngIf="signupForm.get('email')?.touched && signupForm.get('email')?.errors?.['required']"
          class="text-red-400 text-xs mt-1"
        >
          Email is required.
        </p>
        <p
          *ngIf="signupForm.get('email')?.touched && signupForm.get('email')?.errors?.['email']"
          class="text-red-400 text-xs mt-1"
        >
          Please enter a valid email address.
        </p>
      </div>

      <!-- Country -->
      <div>
        <label class="block text-sm mb-1 text-gray-300">Country</label>
        <select
          formControlName="country"
          (change)="onCountryChange($event)"
          class="w-full px-4 py-2.5 rounded-lg bg-gray-800/70 border border-blue-500/30 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <option value="">Select Country</option>
          <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
        </select>
        <p
          *ngIf="signupForm.get('country')?.touched && signupForm.get('country')?.invalid"
          class="text-red-400 text-xs mt-1"
        >
          Country is required.
        </p>
      </div>

      <!-- City -->
      <div>
        <label class="block text-sm mb-1 text-gray-300">City</label>
        <select
          formControlName="city"
          class="w-full px-4 py-2.5 rounded-lg bg-gray-800/70 border border-blue-500/30 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <option value="">Select City</option>
          <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
        </select>
        <p
          *ngIf="signupForm.get('city')?.touched && signupForm.get('city')?.invalid"
          class="text-red-400 text-xs mt-1"
        >
          City is required.
        </p>
      </div>

      <!-- Password -->
      <div class="relative">
        <label class="block text-sm mb-1 text-gray-300">Password</label>
        <div class="relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="Enter password"
            class="w-full px-4 py-2.5 pr-10 rounded-lg bg-gray-800/70 border border-blue-500/30 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          <button
            type="button"
            (click)="togglePassword()"
            class="absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-blue-400 focus:outline-none"
          >
            <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>
        <p
          *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.errors?.['required']"
          class="text-red-400 text-xs mt-1"
        >
          Password is required.
        </p>
        <p
          *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.errors?.['minlength']"
          class="text-red-400 text-xs mt-1"
        >
          Password must be at least 6 characters long.
        </p>
      </div>

      <!-- Sign Up Button -->
      <button
        type="submit"
        [disabled]="loading"
        class="w-full py-2.5 bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        <span *ngIf="!loading">Sign Up</span>
        <span *ngIf="loading" class="animate-pulse">Creating...</span>
      </button>
    </form>

    <!-- Divider -->
    <div class="flex items-center my-6">
      <hr class="flex-grow border-gray-500" />
      <span class="px-3 text-gray-300 text-sm">OR</span>
      <hr class="flex-grow border-gray-500" />
    </div>

    <!-- âœ… Social Buttons Updated -->
    <div class="flex flex-col sm:flex-row gap-3">
      
      <!-- Google Button -->
      <button
        id="googleBtn"
        type="button"
        (click)=" initializeGoogleButton()"
        class="flex items-center justify-center w-full gap-3 py-2.5 bg-white text-gray-700 rounded-lg font-medium shadow-md hover:bg-gray-100 transition duration-200"
      >
        <img src="assets/google.svg" alt="Google" class="w-5 h-5" />
        <span>Continue with Google</span>
      </button>

      <!-- Microsoft Button -->
      <button
        type="button"
        (click)="signInWithMicrosoft()"
        class="flex items-center justify-center w-full gap-3 py-2.5 bg-[#2F2F2F] text-white rounded-lg font-medium shadow-md hover:bg-[#3a3a3a] transition duration-200"
      >
        <img src="assets/microsoft.svg" alt="Microsoft" class="w-5 h-5" />
        <span>Continue with Microsoft</span>
      </button>
    </div>

    <p class="text-center text-gray-400 text-sm sm:text-base mt-5">
      Already have an account?
      <a routerLink="/login" class="text-cyan-400 hover:underline">Login</a>
    </p>
  </div>
</main>
